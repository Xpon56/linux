# Решение задания

1.  [Установка ОС](#1)
2.  [Создание пользователя](#2)
3.  [Настройка сети ОС](#3)
4.  [Обновление ОС](#4)
5.  [Использование команды  sudo](#5)
6.  [Установка и настройка службы времени](#6)
7.  [Установка и использование текстовых редакторов](#7)
8.  [Установка и базовая настройка сервиса SSHD](#8)
9.  [Установка и использование утилит top, htop](#9)
10. [Использование утилиты fdisk](#10)
11. [Использование утилиты df](#11)
12. [Использование утилиты du](#12)
13. [Установка и использование утилиты ncdu](#13)
14. [Работа с системными журналами](#14)
15. [Использование планировщика заданий CRON](#15)




##  Part 1. Установка ОС  <a name="1"></a>

**== Задание ==**

- Установить Ubuntu 20.04 Server LTS без графического интерфейса. (Используем программу для виртуализации - VirtualBox)
- Графический интерфейс должен отсутствовать.
- Узнайте версию Ubuntu, выполнив команду 
    
    ```cat /etc/issue.```

- Вставьте скриншот с выводом команды.

### == Решение ==
- Была установлена Ubuntu 20.04.2 Server LTS на VirtualBox без визуального интерфейса.

![VirtualBox с Ubuntu](src/img/part1.1.png)

- Узнайте версию Ubuntu, выполнив команду 
    cat /etc/issue.

![Вывод команды cat /etc/issue.](src/img/part1.png)

## Part 2. Создание пользователя <a name="2"></a>
 **== Задание ==**

**Создай пользователя, отличного от созданного при установке. Пользователь должен быть добавлен в группу adm.**


- Вставь скриншот вызова команды для создания пользователя.

- Новый пользователь должен быть в выводе команды 

    ```cat /etc/passwd```

- Вставь скриншот с выводом команды.

**== Решение ==**

- Создадим нового пользователя ```xptest1``` с помощью команды:

    ``` 
    sudo adduser xptest1 
    ```
    ![Создание пользователя](src/img/part2.1.png)
- Добавим нового пользователя ```xptest1``` в группу ```adm```:
    ```
    sudo usermod -a -G adm xptest1
    ```
![Добавление пользователя в adm](src/img/part2.2.png)

- Новый пользователь присутствует в выводе команды
``` 
cat /etc/passwd
```
![cat /etc/passwd](src/img/part2.3.png)

## Part 3. Настройка сети ОС <a name="3"></a>
**== Задание ==**
- **Задать название машины вида user-1**

- **Установить временную зону, соответствующую вашему текущему местоположению.**

- **Вывести названия сетевых интерфейсов с помощью консольной команды.**

- **В отчёте дать объяснение наличию интерфейса lo**
.



- **Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера.
В отчёте дать расшифровку DHCP.**



- **Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).**

- **Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).**

- **Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.**


- **В отчёте опишите, что сделали для выполнения всех семи пунктов (можно как текстом, так и скриншотами).
Успешно пропинговать удаленные хосты 1.1.1.1 и ya.ru и вставить в отчёт скрин с выводом команды. В выводе команды должна быть фраза "0% packet loss".**


**== Решение ==**

- Поменяем название машины на ``user-1``:
    ```
    sudo hostnamectl set-hostname user-1
    ```
- Проверим название машины командой ```cat /etc/hostname```:

 ![cat /etc/hostname ](src/img/part3.1..png)

 ## 
- Чтобы узнать какая временная зона установлена на данный момент можно воспользоваться командой date. По умолчанию временная зона не соответствует текущему местоположению.

- Для изменения часового пояса на требуемый Europe/Moscow, используем команд

``` 
sudo timedatectl set-timezone Europe/Moscow
```
- повторная проверка текущей временной зоны, выполненная с помощью команды date, показала актуальные значения. 

 ![Время ](src/img/part3.2.png)

##
- Вывести названия сетевых интерфейсов с помощью консольных команды:

``` 
ls /sys/class/net 
```

![Интерфейсы ](src/img/part3.3.png)

- Интерфейс lo — это интерфейс loopback, который представляет собой виртуальный сетевой интерфейс, предназначенный для взаимодействия с самим собой. Он используется для тестирования сетевых настроек и программ без необходимости подключения к реальной сети.

Интерфейс loopback присутствует во всех операционных системах, включая Linux, и является частью стандарта TCP/IP. Он обозначается как lo и имеет IP-адрес 127.0.0.1.

Использование интерфейса loopback позволяет:
* тестировать сетевые приложения без подключения к сети;
* проверять работу сетевых служб на локальном компьютере;
* обеспечивать безопасность, ограничивая доступ к локальному компьютеру.

В Linux интерфейс loopback управляется с помощью команд ifconfig или ip. Вы можете использовать эти команды для настройки IP-адреса, маски подсети и других параметров интерфейса lo.

##
- Чтобы узнать ip адрес машины, выданный ей DHCP сервером воспользуемся командой:
``` 
cat /var/log/syslog | grep -i dhcp
```
![DHCP ](src/img/part3.4.png)
- На скриншоте видно, что DHCP выдал компьютеру ip адрес: 10.0.2.15/24


- Также ip адрес машины, выданный ей DHCP сервером, можно узнать с помощью команды:
``` 
ip r
 ```
 ![IP ](src/img/part3.5.png)

- DHCP (Dynamic Host Configuration Protocol) — это сетевой протокол, используемый для автоматического назначения IP-адресов, маски подсети, шлюза по умолчанию, DNS-серверов и других параметров конфигурации хостам в сети.

- Чтобы определить и вывести на экран внешний ip-адрес шлюза (ip) воспользуемся командой:
    ```
    curl ifconfig.co
    ```
    ![ip ](src/img/part3.6.png)

 Результат вывода команды: ``` 213.87.133.82```
 - Чтобы определить и вывести на экран внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw), можно воспользоваться командами:
     ``` 
    ip route 
    ```
    
    ![ip ](src/img/part3.7.png)

- Таким образом, мы имеем данные о внешнем IP-адресе шлюза (213.87.133.82) и внутреннем (10.0.2.2)

##
-  Для того, чтобы задать статичные настройки необходимо отключить облачную инициализацию. Для этого применем команд
 ```
 sudo vim /etc/cloud/cloud.cfg.d/subiquity-disable-cloudinit-networking.cfg
 ```
 - Изменим данные на: ```config: disabled```

- Следующим шагом откроем файл ```netplan``` с помощью команды:
    ```
    sudo vim /etc/netplan/00-installer-config.yaml
    ```
- Вводим в этот файл следующие данные

    ![config](src/img/part3.8.png)

- Применим настройки:
    ```
    sudo netplan apply
    ```
- Далее перезагрузим виртуальную машину командой ```reboot``` и убедимся, что настройки сохранены:

    ```
    cat /etc/netplan/00-installer-config.yaml
    ```

    ![config](src/img/part3.9.png)

- После перезагрузкки данные остались прежними 

## 

- Пропингуем хосты 1.1.1.1 и ya.ru:

    ```
    ping 1.1.1.1 -c 3
    ```

    ![config](src/img/part3.10.png)

    ```
    ping ya.ru -c 3
    ```
    ![config](src/img/part3.11.png)

- Запись ```3 packets transmitted, 3 received, 0% packet loss```, указывает на то, что все 3 отправляемых нами пакета, были получены. 

## Part 4. Обновление ОС <a name="4"></a>
**== Задание ==**

**Обновить системные пакеты до последней на момент выполнения задания версии.**

- После обновления системных пакетов, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют.
- Вставить скриншот с этим сообщением в отчёт.

**== Решение ==**

- Обновим пакеты с помощью команд:

    ```
    sudo apt update
    ```

    ![config](src/img/part4.1.png)

- До обнавления 

- Обновляем все с помощью команды 
    ```
    sudo apt full-upgrade
    ```
    ![config](src/img/part4.2.png)

- Все обновлено 

## Part 5. Использование команды sudo <a name="5"></a>
== Задание ==

**Разрешить пользователю, созданному в Part 2, выполнять команду sudo.**


- В отчёте объяснить истинное назначение команды sudo (про то, что это слово - "волшебное", писать не стоит).

- Поменять hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo).
- Вставить скрин с изменённым hostname в отчёт.

**== Решение ==**

- Разрешим пользователю из 2 задания, выполнить команду sudo. Для разрешения добавляем его в группу пользователей ``` sudo ```. Для этого используем команду 


    ``` 
    sudo usermod -a -G sudo xptest1

    ```

- Проверяем к каким группам относиться наш пользователь

    ```
    groups xptest
    ```

    ![sudo user](src/img/part5.1.png)

- Пользователь принадлежит к группам testusr adm sudo. Операция успешно выполнена, пользователь принадлежит к группе sudo, что предоставляет ему права на выполнение команд от имени супер-пользователя и выполнять соответствующую команду.

##


- Команда sudo — это программа, которая позволяет выполнять команды от имени другого пользователя, обычно суперпользователя (root). Это позволяет обычным пользователям выполнять административные задачи, но с ограничениями, которые определяются конфигурацией системы.-

##
- Поменяем hostname ОС от имени пользователя, созданного в 2 задание.
    ```
    sudo su xptest1
    ```
- Узнаем имя текущего хоста:
    ```
    hostnamectl
    ```
- Изменим имя хоста с ```user-1``` на ```user-2```:
    ```
    sudo hostnamectl set-hostname user-2
    ```
- Проверим изменения командой:
  ```
  hostname
  ```
  
  ![hostname](src/img/part5.2.png)

- Имя хоста теперь ```user-2```

## Part 6. Установка и настройка службы времени <a name="6"></a>

**== Задание ==**

**Настрой службу автоматической синхронизации времени.**

- Выведи время часового пояса, в котором ты сейчас находишься.
- Вывод следующей команды должен содержать ``` NTPSynchronized=yes: 
timedatectl show ```

- Вставь скрины с корректным временем и выводом команды в отчёт.

**== Решение ==**

- С помощью команды``` date``` выведем текущее время часового пояса, в котором мы находимся.

- Для вывода настроек часового пояса, используем команду:

    ```
    timedatectl show
    ```
    ![timedacetl](src/img/part6.1.png)

- В выводе команды ```timedatectl show``` содержится ```NTPSynchronized=yes```. Отображение времени корректно.


## Part 7. Установка и использование текстовых редакторов <a name="7"></a>

**== Задание ==**

**Установи текстовые редакторы VIM (+ любые два по желанию NANO, MCEDIT, JOE и т.д.)**


**Используя каждый из трех выбранных редакторов, создай файл test_X.txt, где X -- название редактора, в котором создан файл. Напиши в нём свой никнейм, закрой файл с сохранением изменений.**

 - В отчёт вставь скриншоты:

  - Из каждого редактора с содержимым файла перед закрытием;


 - В отчёте укажи, что сделал для выхода с сохранением изменений.


**Используя каждый из трех выбранных редакторов, открой файл на редактирование, отредактируй файл, заменив никнейм на строку «21 School 21», закрой файл без сохранения изменений.**

 - В отчёт вставь скриншоты:

  -  Из каждого редактора с содержимым файла после редактирования;


 - В отчёте укажи, что сделал для выхода без сохранения изменений.


**Используя каждый из трех выбранных редакторов, отредактируй файл ещё раз (по аналогии с предыдущим пунктом), а затем освой функции поиска по содержимому файла (слово) и замены слова на любое другое.**

- В отчёт вставь скриншоты:

- Из каждого редактора с результатами поиска слова;
- Из каждого редактора с командами, введёнными для замены слова на другое.

**== Решение ==**

- Выполним установку текстовых редакторов командами:

```
sudo apt install vim
```

```
sudo apt install nano
```

```
sudo apt install mcedit
``` 
##



**Запись никнейма в файлы и закрытие с сохранением**

![test_X](src/img/part7.1.png)

- VIM. Запишем никнейм ```daellano```

  ![NICK](src/img/part7.2..png)

- Для выхода с сохранением используем ESC, и введем ```:wq```.


-  NANO. Запишем никнейм


    ![NICK](src/img/part7.3.png)

- Для выхода с сохранением изменений нужно нажать ```Ctrl+S```  и затем  ```Ctrl+X```.

- MCEDIT. Запишем никнейм

    ![NICK](src/img/part7.4.png)

- Для выхода с сохранением изменений нужно нажать ```F10``` и выбрать ```Yes```.

##

**Запись "21 School 21" в файлы с выходом без сохранения**

- VIM. Запишем "21 School 21":

![School21](src/img/part7.5.png)

- Для выхода без сохранения нужно нажать ```ESC```, затем написать ```:q!```. Проверим, что изменения не сохранились:

![School21](src/img/part7.6.png)

- NANO. Запишем "21 School 21":

![School21](src/img/part7.7.png)

- Для выхода без сохранения изменений нужно нажать ```Ctrl+X``` и подтвердить нажатием на ```N```. Проверим, что изменения не сохранились:

![School21](src/img/part7.8.png)

- MCEDIT. Запишем "21 School 21":

![School21](src/img/part7.9.png)

- Для выхода без сохранения изменений нужно нажать ```F10``` и выбрать ```нет```


- Проверим, что изменения не сохранились:

![School21](src/img/part7.10.png)

##

**Поиск по слову в файлах**

- Внесем изменения с предыдущего пункта (запишем в файлы "21 School 21") и сохраним их.

- **Vim**
- Поиск:
```ESC + /<слово_для_поиска>```

![Поиск](src/img/part7.11.png)

- Замена:
``` :s/<заменяемое>/<заменитель>```

![Замена](src/img/part7.12.png)

- **NANO**

- Поиск:
```Ctrl + W```

![Поиск](src/img/part7.13.png)

- Замена:
``` Ctrl + \```

![Замена](src/img/part7.15.png)

- **МCEDIT**

- Поиск:
```F7```, вводим и подтверждаем слово для поиска:

![Поиск](src/img/part7.16.png)

- Замена:
```F4```, вводим и подтверждаем слово для замены:

 ![Замена](src/img/part7.17.png)

  ![Замена](src/img/part7.18.png)

## Part 8. Установка и базовая настройка сервиса SSHD <a name="8"></a>

**== Задание ==**

**Установить службу SSHd.**

**Добавить автостарт службы при загрузке системы.**

**Перенастроить службу SSHd на порт 2022.**

**Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.**

- В отчёте объяснить значение команды и каждого ключа в ней.


**Перезагрузить систему.**


- В отчёте опишите, что сделали для выполнения всех пяти пунктов (можно как текстом, так и скриншотами).
- Вывод команды netstat -tan должен содержать  
``` tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN``` 
(если команды netstat нет, то ее нужно установить)


- Скрин с выводом команды вставить в отчёт.
- В отчёте объяснить значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.

**== Решение ==**

- Установим службу SSHd с помощью команды:
    ``` sudo apt install openssh-server ```
- Узнаем состояние SSHd службы, воспользовавшись командой:
    ```sudo systemctl status ssh```

    ![Статус](src/img/part8.1.png)

- Чтобы включить автостарт можно воспользоваться командой ```sudo systemctl enable ssh```.

- Для перенастройки службы SSHd на порт 2022 откроем файл ```sshd_config ```
    ``` 
    sudo nano /etc/ssh/sshd_config
    ```
- Изменим значение параметра ```Port``` с 22 на 2022

    ![Config](src/img/part8.2.png)

- Чтобы изменения в конфигурации сохранились, перезапустим сервер OpenSSH, используя следующую команду:
    ``` 
    sudo systemctl restart ssh 
    ```
- Проверим состояние SSHd службы после изменения порта командой ``` sudo systemctl status ssh ```

    ![Config](src/img/part8.3.png)

- Настроим брандмауэр, так как мы изменили SSH-порт по умолчанию на 2022.

    ![Config](src/img/part8.4.png)

- Покажем наличие процесса sshd, используя команду:
    ```
    ps aux | grep -i ssh
    ```
    ![Config](src/img/part8.5.png)

```
    1. `ps`: Это утилита для просмотра списка процессов в операционной системе Linux.
    2. Параметр `-a`: Выбирает все процессы всех пользователей, кроме фоновых.
    3. Параметр `-u`: Обозначает, что формат вывода информации о процессах будет ориентирован на пользователя и будет предоставлять более подробную информацию о процессах.
    4. Параметр `-x`: Указывает `ps` перечислить процессы без управляющего терминала, то есть процессы, которые работают в фоновом режиме.
    5. `grep -i ssh`: Эта команда фильтрует вывод `ps aux`, чтобы показать только строки, которые содержат "ssh" с игнорированием регистра за счет опции `-i`.
    6. Символ `|`: Перенаправляет вывод (стандартный вывод) одной команды в качестве ввода (стандартного ввода) другой команде. В данном случае, вывод команды `ps aux` передается на вход команде `grep -i ssh`, чтобы отфильтровать процессы, связанные с SSH.
```

- Выполним перезагрузку машины командой ```reboot``` и выполним команду:

    ``` 
    netstat -tan 

    ```


    ![Config](src/img/part8.6.png)

- вывод команды содержит tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN, что и требовалось.

    ```
    Команда `netstat -tan` выводит список всех открытых TCP-протоколов сетевого подключения с указанием следующих значений в таблице:

    а) **Proto**: Сетевой протокол (tcp, udp).
    б) **Recv-Q**: Количество байтов, которые находятся в буфере приема TCP/IP, но еще не переданы приложению. Повышенное значение может указывать на необходимость проверки работоспособности приложения, которое работает с данным портом.
    в) **Send-Q**: Количество байтов, которые находятся в буфере отправки TCP/IP, но еще не отправлены или отправлены, но не подтверждены. Повышенное значение может быть связано с перегрузкой сети сервера.
    г) **Local Address**: Локальный адрес сервера. В обычных соединениях этот адрес - адрес сервера, к которому происходит подключение. В прослушиваемых портах (LISTEN) - это диапазон адресов. Например, `0.0.0.0:port` означает, что можно подключиться ко всем адресам сервера, а `192.168.0.35:port` означает, что можно подключиться только к этому адресу сервера.
    д) **Foreign Address**: Адрес второй стороны. В обычных соединениях это адрес, с которого пришло соединение. В прослушиваемых портах (LISTEN) это диапазон адресов. Например, `0.0.0.0:*` означает, что можно подключиться с любого адреса и любого порта, а `192.168.0.50:*` означает, что можно подключиться только с этого адреса и с любого порта.
    е) **State**: Состояние соединения или прослушивания.
    ```

## Part 9. Установка и использование утилит top, htop <a name="9"></a>

**== Задание ==**

**Установить и запустить утилиты top и htop.**


- По выводу команды top определить и написать в отчёте:

  - uptime

  - количество авторизованных пользователей

  - общую загрузку системы

  - общее количество процессов

  - загрузку cpu

  - загрузку памяти

  - pid процесса занимающего больше всего памяти

  - pid процесса, занимающего больше всего процессорного времени




- В отчёт вставить скрин с выводом команды htop:

  - отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME

  - отфильтрованному для процесса sshd

  - с процессом syslog, найденным, используя поиск

  - с добавленным выводом hostname, clock и uptime




**== Решение ==**


- Команда ```top``` выводит на экран:


    ![top](src/img/part9.1.png)


-     uptime - 1час 49 минут;
-     количество авторизованных пользователей - 1;
-     общую загрузку системы - 0.00, 0,00, 0,00;
-     общее количество процессов - 135;
-     загрузка cpu - 0.0 %;
-     загрузка памяти - 177,8 из 226,7;
-     pid процесса занимающего больше всего памяти - 1;
-     pid процесса, занимающего больше всего процессорного времени - 37


- **htop :**

   - Вывод команды без сортировки


    ![htop](src/img/part9.2.png)

    - Для сортировки в ```htop``` нужно нажать ```F6``` и выбрать параметр сортировки.

    - ```htop``` отсортированный по ```PID```

    ![htop](src/img/part9.3.png)

    - ```htop``` отсортированный по ```PERCENT_CPU```

    ![htop](src/img/part9.4.png)

    - ```htop``` отсортированный по ```PERCENT_MEM```

    ![htop](src/img/part9.5.png)


    - ```htop``` отсортированный по ```TIME```

    ![htop](src/img/part9.6.png)


    - Для использования фильтров в ```htop``` нужно нажать ```F4``` и выбрать параметр фильтрации.

    - ```htop```, отфильтрованный для процесса ```SSHd```

    ![htop](src/img/part9.7.png)


    - Для использования поиска в ```htop``` нужно нажать ```F3``` и ввести объект поиска. 

    - ```htop``` с процессом ```syslog```, найденным, используя поиск:
    
    ![htop](src/img/part9.8.png)

    - Для добавления отображения дополнительных параметров в ```htop```, необходимо нажать ```F2``` и добавить требуемые параметры. ```htop``` с           добавленным выводом ```hostname, clock и uptime```


    ![htop](src/img/part9.9.png)



## Part 10. Использование утилиты fdisk <a name="10"></a>

**== Задание ==**

- Запустить команду fdisk -l.

- В отчёте написать название жесткого диска, его размер и количество секторов, а также размер swap.

**== Решение ==**

**Запустить команду fdisk -l.**


- Выполним команду:

    ``` 
    fdisk -l 
    ```
    ![fdisk](src/img/part10.1.png)

    - Название жесткого диска: VBOX HARDDISK ;
    - Размер диска: 50 Гигабайт;
    - Количество секторов: 104857600;

- Чтобы узнать размер ```swap``` выполним команду:

    ```
    free -h 
    ```
    - Или более точно можно узнать с помощью 

    ```
    swapon -s
    ```

    ![swap](src/img/part10.2.png)

    -И того размер swap 5,3Гб или 5560316 кб


## Part 11. Использование утилиты df <a name="11"></a>

**== Задание ==**

-Запустить команду df.

- В отчёте написать для корневого раздела (/):

    - размер раздела
    - размер занятого пространства
    - размер свободного пространства
    - процент использования

 - Определить и написать в отчёт единицу измерения в выводе.


**Запустить команду df -Th.**

 - В отчёте написать для корневого раздела (/):

    - размер раздела
    - размер занятого пространства
    - размер свободного пространства
    - процент использования

 - Определить и написать в отчёт тип файловой системы для раздела.

**== Решение ==**



- Выполним команду:

    ``` 
    df /
    ```

    ![df](src/img/part11.1.png)


    -Для корневого раздела (/):
    - Размер раздела: 24590672;
    - Размер занятого пространства: 8724644;
    - Размер свободного пространства: 14591560;
    - Процент использования: 38 %;
    - Единицы измерения при выводе: Килобайты.

    - Выполним команду:

    ```
    df -Th /
    ```

    ![df](src/img/part11.2.png)


    - Для корневого раздела (/):
    - Размер раздела: 24;
    - Размер занятого пространства: 8.4;
    - Размер свободного пространства: 14;
    - Процент использования: 38 %;
    - Единицы измерения при выводе: Гигабайты.



    ```
    Ext4 - это журналируемая файловая система, применяемая в операционных системах, основанных на ядре Linux. Она базируется на Ext3, но отличается использованием механизма непрерывной записи файлов в блоках (extents), что снижает фрагментацию и улучшает производительность. Особенностью Ext4 является наличие журналирования, которое обеспечивает возможность восстановления файловой системы в случае сбоев в работе компьютера.
    ```


## Part 12. Использование утилиты du <a name="12"></a>

**== Задание ==**

**Запустить команду du.**

**Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)**

**Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)**

 - В отчёт вставить скрины с выводом всех использованных команд.

**== Решение ==**


 - Выполним команду:


 ```
 du 
 ```

 ![du](src/img/part12.1.png)



 - Вывод размера папки /home в байтах и в человекочитаемом виде командами:

 ```
 sudo du -s /home/
 ```


 ```
 sudo du -sh /home/
 ```


![du](src/img/part12.2.png)


- Вывод размера папки /var в байтах и в человекочитаемом виде командами:

```
sudo du -s /var/
```

```
sudo du -sh /var/
```


![du](src/img/part12.3.png)


- Вывод размера папки /var/log в байтах и в человекочитаемом виде командами:

```
sudo du /var/log/
```

```
sudo du -h /var/log/
```

![du](src/img/part12.4.png)

##

- Вывод размера всего содержимого папки /var/log в байтах и в человекочитаемом виде командами:

```
sudo du /var/log/
```

```
sudo du -h /var/log/

```

![du](src/img/part12.5.png)


- Вывод размера всего содержимого папки (каждого вложенного элемента) /var/log с использованием * командой:

```
sudo du /var/log/* | less
```

![du](src/img/part12.6.png)



## Part 13. Установка и использование утилиты ncdu <a name="13"></a>

**== Задание ==**

**Установи утилиту ncdu**

**Выведи размер папок ```/home, /var, /var/log```**

- Размеры должны примерно совпадать с полученными в ```Part 12```.


- В отчёт вставь скрины с выводом использованных команд.

**== Решение ==**


- Установим утилиту ncdu командой:

```

sudo apt install ncdu
```

![ncdu](src/img/part13.1.png)


- Выведем размер папки ```/home```:

![ncdu](src/img/part13.2.png)

- Выведем размер папки ```/var```:


![ncdu](src/img/part13.3.png)

- Выведем размер папки ```/var/log```:

![ncdu](src/img/part13.4.png)


- На скриншотах видно, размеры папок примерно совпадают с полученными в части 12 ```[Part 12]``` задания.


## Part 14. Работа с системными журналами <a name="14"></a>

**== Задание ==**

**Открыть для просмотра:**

**1. /var/log/dmesg**

**2. /var/log/syslog**

**3. /var/log/auth.log**

- Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему.
- Перезапустить службу SSHd.
- Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

**== Решение ==**

- Файл /var/log/dmesg содержит сообщения и информацию об аппаратных устройствах, загружаемых в системе во время загрузки. Он регистрирует сообщения, относящиеся к драйверам устройств. Размер файла ограничен, и старые сообщения перезаписываются новыми по мере его заполнения. Для просмотра содержимого файла можно использовать команду dmesg.

```
less /var/log/dmesg
```

![log](src/img/part14.1.png)

- /var/log/syslog — содержит глобальный системный журнал, в котором пишутся сообщения с момента запуска системы, от ядра Linux, различных служб, обнаруженных устройствах, сетевых интерфейсов и много другого. Откроем для просмотра файл /var/log/syslog с помощью команды:

```
less /var/log/syslog
```

![log](src/img/part14.2.png)

- /var/log/auth.log — информация об авторизации пользователей, включая удачные и неудачные попытки входа в систему, а также задействованные механизмы аутентификации. Откроем для просмотра файл /var/log/auth.log:

```
less /var/log/auth.log
```

![log](src/img/part14.3.png)

- Время последней успешной авторизации: May 12, 18:25:29

- Имя пользователя: xp

- Метод входа в систему: by uid = 0 (User Identifier). Суперпользователь всегда должен иметь UID, равный нулю (0).

- Перезапуск службы SSHd:
    ```

    sudo systemctl restart ssh

    ```
- В журнале отобразится сообщение о перезапуске службы:

![log](src/img/part14.4.png)


## Part 15. Использование планировщика заданий CRON <a name="15"></a>

**== Задание ==**

**Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.**

- Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
- Вывести на экран список текущих заданий для CRON.
- Вставить в отчёт скрины со строчками о выполнении и списком текущих задач.


**Удалите все задания из планировщика заданий.**

- В отчёт вставьте скрин со списком текущих заданий для CRON.

**== Решение ==**

- Запустим команду ```uptime``` через каждые 2 минуты. Используем планировщик заданий ```CRON``:

```
crontab -e
```
- Вносим необходимые изменения в конец файла ```*/2 * * * * uptime```

![cron](src/img/part15.1.png)

- После чего сохраним и закроем файл.

- Найдем в системных журналах строчки о выполнении ```uptime```:

```
less /var/log/syslog | grep CRON
```

![cron](src/img/part15.2.png)

- Отобразим список текущих заданий для ```CRON``:

```
crontab -l
```

![cron](src/img/part15.3.png)


- Удалим все задания из планировщика заданий CRON:

```
crontab -r
```

- Проверим список текщих задач ```crontab -l```:

![cron](src/img/part15.4.png)
